<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Intent Training</title>
  <meta name="description" content="Node.js Assistant framework designed for developers to quickly build chatbots and assistants with structure, conventions and useful utilities.
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://goodintentionsassistant.github.io/en/intents/training.html">
  <link rel="alternate" type="application/rss+xml" title="Good Intentions Assistant Framework" href="https://goodintentionsassistant.github.io/feed.xml">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons">

  <script defer src="https://use.fontawesome.com/releases/v5.0.2/js/all.js"></script>

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <img src="/img/good-intentions-chatbot-logo.png">
    <a class="site-title" href="/">
      Good Intentions
      <span>Assistant Chatbot Framework</span>
    </a>
  </div>

  <div class="wrapper-sub">
    <div class="wrapper">
      <div class="sub">
        <h2>Docs</h2>
      </div>
    </div>
  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="side-nav">
          
<nav>

  <ul>
    <li><a href="/">Getting Started</a>
      <ul style="display:none;">
        <li><a href="/en/start/installation">Installation</a></li>
        <li><a href="/en/start/configuration">Configuration</a></li>
        <li><a href="/en/start/development">Development Tips</a></li>
        <li><a href="/en/start/components">Key components</a></li>
        <li><a href="/en/start/contributing">Contributing</a></li>
      </ul>
    </li>

    <li><a href="/en/clients/">Clients</a>
      <ul style="display:none;">
        <li><a href="/en/clients/authorizing">Authorizing</a></li>
        <li><a href="/en/clients/request">Request</a></li>
        <li><a href="/en/clients/response">Response</a></li>
        <li><a href="/en/clients/sdk">Client SDK</a></li>
      </ul>

    <li><a href="/en/skills/">Skills</a>
      <ul style="display:none;">
        <li><a href="/en/skills/create">Creating a skill</a></li>
        <li>Events</li>
      </ul>

    <li><a href="/en/intents/">Intents</a>
      <ul style="display:none;">
        <li><a href="/en/intents/training">Training</a></li>
        <li><a href="/en/intents/parameters">Parameters</a></li>
        <li><a href="/en/intents/result">Returning result</a></li>
        <li><a href="/en/intents/attachments">Attachments</a></li>
        <li><a href="/en/intents/expects">Expects</a></li>
        <li><a href="/en/intents/redirect">Redirecting</a></li>
        <li><a href="/en/intents/fallback">Fallbacks</a></li>
        <li><a href="/en/intents/callback">Callbacks</a></li>
      </ul>
    </li>

    <li><a href="/en/entities/">Entities</a>
      <ul style="display:none;">
        <li><a href="/en/entities/data">Entity data</a></li>
        <li><a href="/en/entities/entity_load_json">Data from JSON</a></li>
        <li><a href="/en/entities/entity_load_csv">Data from CSV</a></li>
        <li><a href="/en/entities/entity_load_custom">Custom data</a></li>
        <li><a href="/en/entities/entity_object">Fetch entity object</a></li>
        <li><a href="/en/entities/callbacks">Callbacks</a></li>
        <li>Parsing for parameters</li>
      </ul>
    </li>

    <li><a href="/en/app/">App</a>
      <ul style="display:none;">
        <li><a href="/en/app/errors">Errors</a></li>
        <li style="display:none;">Server</li>
        <li style="display:none;">Clients</li>
        <li style="display:none;">Identifier</li>
        <li style="display:none;">Training</li>
        <li style="display:none;"><a href="/en/app/queue">Queue + flood protection</a></li>
        <li style="display:none;"><a href="/en/app/requests">Requests</a></li>
        <li style="display:none;">Data</li>
        <li style="display:none;">Logging</li>
        <li style="display:none;">Caching</li>
        <li style="display:none;">Storage</li>
        <li style="display:none;">Scrubber</li>
      </ul>
    </li>

    <li><span>Conventions</span>
      <ul style="display:none;">
        <li>Code formatting</li>
        <li>Code documentation</li>
        <li>Unit tests</li>
      </ul>
    </li>
  </ul>

</nav>

        </div>
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Intent Training</h1>
  </header>

  <div class="post-content">
    <p>For intents to be called from user input they must train the app with keywords and phrases.</p>

<p>Using <code class="highlighter-rouge">this.train()</code> function you can train the bot to understand the intent.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kr">class</span> <span class="nx">PingIntent</span> <span class="kr">extends</span> <span class="nx">Intent</span> <span class="p">{</span>

  <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">train</span><span class="p">([</span><span class="s1">'ping'</span><span class="p">,</span><span class="s1">'pong'</span><span class="p">]);</span>
  <span class="p">}</span>

  <span class="nx">response</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">'Pong'</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre>
</div>

<div class="chat">
  <div class="user"><span>Ping</span></div>
  <div class="bot"><span>Pong</span></div>
</div>

<h2 id="loading-from-an-entity">Loading from an entity</h2>

<p>Using entities rather than manually entering the training data into the intent seperates logic and means entities can be shared across different intents.</p>

<p>An entity can store and load data a number of different ways. In the example we are just storing the data directly within the entity. To learn more about different ways to use entities see the Entity documentation section.</p>

<p>Using the <code class="highlighter-rouge">this.train()</code> method any value starting with the @ symbol will be recognised as an entity to be loaded.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kr">class</span> <span class="nx">ColourIntent</span> <span class="kr">extends</span> <span class="nx">Intent</span> <span class="p">{</span>

  <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">train</span><span class="p">([</span>
      <span class="s1">'@App.Example.Entity.Colour'</span>
    <span class="p">]);</span>
  <span class="p">}</span>

  <span class="nx">response</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">'You mentioned a colour'</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre>
</div>

<p>The entity file is stored in <code class="highlighter-rouge">app/Skills/Example/Entity/colour_entity.js</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kr">class</span> <span class="nx">ColourEntity</span> <span class="kr">extends</span> <span class="nx">Entity</span> <span class="p">{</span>

  <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">'red'</span><span class="p">:</span> <span class="p">{},</span>
      <span class="s1">'blue'</span><span class="p">:</span> <span class="p">{},</span>
      <span class="s1">'green'</span><span class="p">:</span> <span class="p">{},</span>
      <span class="s1">'white'</span><span class="p">:</span> <span class="p">{},</span>
      <span class="s1">'black'</span><span class="p">:</span> <span class="p">{}</span>
    <span class="p">};</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre>
</div>

<p>See the Entity documentation for more information on ways to store data.</p>

<div class="chat">
  <div class="user"><span>Red</span></div>
  <div class="bot"><span>You mentioned a colour</span></div>
  <div class="user"><span>I like green</span></div>
  <div class="bot"><span>You mentioned a colour</span></div>
  <div class="user"><span>Purple</span></div>
  <div class="bot"><span>I don't understand</span></div>
</div>

<h2 id="classifier-collections">Classifier collections</h2>

<p>When training GI the <code class="highlighter-rouge">default</code> collection will use the NLP classifier to match the user input to an intent.</p>

<p>Triggers and symnomns train the default collection. To change the collection change it as an option when using the <code class="highlighter-rouge">train()</code> method.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">//Default NLP collection</span>
<span class="k">this</span><span class="p">.</span><span class="nx">train</span><span class="p">([</span><span class="s1">'kiss me'</span><span class="p">],</span> <span class="p">{</span> <span class="na">collection</span><span class="p">:</span> <span class="s1">'default'</span> <span class="p">});</span>

<span class="c1">//Use the strict collection</span>
<span class="k">this</span><span class="p">.</span><span class="nx">train</span><span class="p">([</span><span class="s1">'kiss me'</span><span class="p">],</span> <span class="p">{</span> <span class="na">collection</span><span class="p">:</span> <span class="s1">'strict'</span> <span class="p">});</span>

<span class="c1">//If nothing is found in default or strict then try the fall back</span>
<span class="k">this</span><span class="p">.</span><span class="nx">train</span><span class="p">([</span><span class="s1">'kiss me'</span><span class="p">],</span> <span class="p">{</span> <span class="na">collection</span><span class="p">:</span> <span class="s1">'fallback'</span> <span class="p">});</span>
</code></pre>
</div>

<h2 id="strict-collection">Strict collection</h2>

<p>When the user input is received by the app the strict collection will be checked for matches before the NLP collection. This is useful when you’re expecting exact input or input which can be matched with regular expressions.</p>

<p>If the strict collection makes a match the default NLP collection is not checked.</p>

<p>Adding a strict match for <code class="highlighter-rouge">kiss me</code> means the user will always go to that intent and the NLP default collection is not checked.</p>

<p>Case is ignored.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kr">class</span> <span class="nx">KissMeIntent</span> <span class="kr">extends</span> <span class="nx">Intent</span> <span class="p">{</span>

  <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">train</span><span class="p">([</span><span class="s1">'kiss me'</span><span class="p">],</span> <span class="p">{</span>
      <span class="na">collection</span><span class="p">:</span> <span class="s1">'strict'</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">response</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">'Muwah'</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre>
</div>

<div class="chat">
  <div class="user"><span>Kiss me</span></div>
  <div class="bot"><span>Muwah</span></div>
  <div class="user"><span>Why not kiss me</span></div>
  <div class="bot"><span>I don't understand</span></div>
  <div class="user"><span>Kiss bob</span></div>
  <div class="bot"><span>I don't understand</span></div>
</div>

<h2 id="regular-expression-training">Regular expression training</h2>

<p>Regular expressions can be added to the training for matching. These will be added to the strict collection for checking before the NLP collection checking.</p>

<p>It’s not really recommended to use regular expressions because an extact match is required but it can be useful for a calculator intent.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">train</span><span class="p">([</span>
  <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="sr">/^.*</span><span class="se">[\d</span><span class="sr">+</span><span class="se">]</span><span class="sr"> x </span><span class="se">[\d</span><span class="sr">+</span><span class="se">]</span><span class="sr">.*$/</span><span class="p">,</span><span class="s1">'g'</span><span class="p">),</span>
  <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="sr">/^</span><span class="se">(</span><span class="sr">calc </span><span class="se">)?[\d\+\/\*</span><span class="sr">.</span><span class="se">\-</span><span class="sr">% </span><span class="se">\(\)</span><span class="sr">=</span><span class="se">]</span><span class="sr">*$/</span><span class="p">,</span><span class="s1">'g'</span><span class="p">),</span>
  <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="sr">/^</span><span class="se">[\d</span><span class="sr">+</span><span class="se">]</span><span class="sr">*%</span><span class="se">(</span><span class="sr"> of</span><span class="se">)?</span><span class="sr"> </span><span class="se">[\d\+\/\*</span><span class="sr">.</span><span class="se">\-</span><span class="sr"> </span><span class="se">\(\)</span><span class="sr">=</span><span class="se">]</span><span class="sr">*$/</span><span class="p">,</span><span class="s1">'g'</span><span class="p">)</span>
<span class="p">]);</span>
</code></pre>
</div>

<div class="chat">
  <div class="user"><span>1+2</span></div>
  <div class="bot"><span>3</span></div>

  <div class="user"><span>20% of 90</span></div>
  <div class="bot"><span>18</span></div>

  <div class="user"><span>60 + 5%</span></div>
  <div class="bot"><span>63</span></div>

  <div class="user"><span>60 + 5%</span></div>
  <div class="bot"><span>63</span></div>

  <div class="user"><span>24 + 54 + 68 - 34 * 9 / 8</span></div>
  <div class="bot"><span>107.75</span></div>
</div>

<p>The classifier collection will be automatically set to <code class="highlighter-rouge">strict</code> when using the <code class="highlighter-rouge">RegExp</code> method in the <code class="highlighter-rouge">train()</code> method so it’s possible to mix NLP and strict collections.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">train</span><span class="p">([</span>
  <span class="s1">'roll'</span><span class="p">,</span>
  <span class="s1">'rolling'</span><span class="p">,</span>
  <span class="s1">'dice'</span><span class="p">,</span>
  <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="sr">/^</span><span class="se">(\d</span><span class="sr">+</span><span class="se">)?</span><span class="sr">d</span><span class="se">((\d</span><span class="sr">+</span><span class="se">)([</span><span class="sr">+-</span><span class="se">]\d</span><span class="sr">+</span><span class="se">)?)?</span><span class="sr">$/</span><span class="p">,</span><span class="s1">'g'</span><span class="p">)</span>
<span class="p">]);</span>
</code></pre>
</div>

<div class="chat">
  <div class="user"><span>roll a dice</span></div>
  <div class="bot"><span>Rolled 2</span></div>

  <div class="user"><span>6d2</span></div>
  <div class="bot"><span>Rolled 8</span></div>
</div>

<h2 id="fallback-classifier">Fallback classifier</h2>

<p>It’s always nice to have fallback intents if the classifiers with trained data did not get a match.</p>

<p>GI has common fallback intents in <code class="highlighter-rouge">Common/Intent/Fallbacks</code> for How, What, When, Where, Who and Why.</p>

<p>See the fallbacks documentation for more information.</p>

  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Good Intentions Assistant Framework</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Good Intentions Assistant Framework</li>
          <li><a href="mailto:darren.m@firecreekweb.com">darren.m@firecreekweb.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/darrenmoore"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">darrenmoore</span></a>

          </li>
          

          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Node.js Assistant framework designed for developers to quickly build chatbots and assistants with structure, conventions and useful utilities.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>


<script src="http://code.responsivevoice.org/responsivevoice.js"></script>

<script src="/converse/library/handlebars-v4.0.11.js"></script>
<script src="/converse/library/socket.io.js"></script>
<script src="/converse/library/js.cookie.js"></script>
<script src="/converse/library/store.everything.min.js"></script>

<script src="/converse/converse.js"></script>


<script id="converse-template" type="text/x-handlebars-template">

	<div class="converse">

		<div class="converse-launcher">
			<div>
				<i class="fas fa-comments"></i>
				<i class="fas fa-times"></i>
			</div>
		</div>

		<div class="converse-menu" style="display:none;">
			<ul>
				<li><span><a href="#" data-converse-menu="clear-history">Clear history</a></span></li>
				<li><span><a href="#" data-converse-menu="reset-user">Reset user identity</a></span></li>
				<li><span><a href="#" data-converse-menu="debug-mode">Debug mode on / off</a></span></li>
			</ul>
		</div>

		<div class="converse-messenger" style="display:none;">
			<div class="converse-header">
				<div class="converse-title">Good Intentions</div>
				<div class="converse-controls">
					<div class="converse-control converse-control-menu"><i class="fas fa-cog"></i></div>
					<div class="converse-control converse-control-close"><i class="fas fa-times"></i></div>
				</div>
			</div>

			<div class="converse-content">

				<div class="converse-history">
				</div>

				<div class="converse-connecting">
					Connecting...
				</div>

			</div>

			<div class="converse-footer">

				<div class="converse-input converse-actions" style="display:none;">
				</div>

				<div class="converse-input converse-text" style="display:none;">
					<input type="text" placeholder="Send a message">
					<button class="send"><i class="fas fa-chevron-right"></i></button>
				</div>

			</div>
		</div>

	</div>

</script>


<script id="converse-partial-message-event" type="text/x-handlebars-template">
	<div class="converse-message converse-message-event">
		<span>{{text}}</span>
	</div>
</script>


<script id="converse-partial-message-in" type="text/x-handlebars-template">
	<div class="converse-message converse-message-in">
		<span>
			{{#if text}}
				{{text}}
			{{/if}}
			{{#if img}}
				<img src="{{img}}">
			{{/if}}
		</span>
	</div>
</script>


<script id="converse-partial-message-out" type="text/x-handlebars-template">
	<div class="converse-message converse-message-out">
		<span>
			{{text}}
		</span>
	</div>
</script>





<script
src="https://code.jquery.com/jquery-3.2.1.min.js"
integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
crossorigin="anonymous"></script>
<script type="text/javascript" src="/js/site.js" charset="utf-8"></script>


</html>
